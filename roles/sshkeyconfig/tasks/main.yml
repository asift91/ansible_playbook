---
 - hosts: 127.0.0.1
   connection: local
   tasks:
   - name: "upgrade"
     apt:
      upgrade: true
     become: true

   - name: "install sshpass"
     #command: apt-get install sshpass
     apt:
       name: sshpass
       state: latest
     become: yes

   - name: “generate sshkey”
     openssh_keypair:
      path: /home/azureadmin/.ssh/id_rsa
      group: azureadmin
      owner: azureadmin
      size: 4096
     become: yes
      
   - name: "copy file to remote host"
     command: sshpass -p iTalent@27 ssh-copy-id -i /home/azureadmin/.ssh/id_rsa.pub -o StrictHostKeyChecking=no azureadmin@13.68.243.254
